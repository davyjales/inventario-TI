# TODO - Correção da Funcionalidade de Histórico

## Problemas Identificados:
- [ ] User do equipamento não está aparecendo na tabela
- [ ] Nome do equipamento não está aparecendo na tabela
- [ ] Botão de mostrar alterações está mostrando campos que não foram alterados
- [ ] Campo "cargo" sempre aparece mesmo quando não foi alterado
- [ ] Snapshot no modal não mostra os valores corretos do momento da alteração
- [ ] Detalhes do equipamento deveriam aparecer na área do botão de alterações

## Análise dos Problemas:
1. **historicoService.js**: Lógica de snapshot não está funcionando corretamente
2. **js/historico.js**: Renderização está incluindo campos não alterados
3. **logEquipmentChange.js**: Comparação de string pode estar causando falsos positivos
4. **equipamentosService.js**: Lógica de detecção de mudanças está incluindo campos desnecessários

## Plano de Correção:

### 1. Corrigir historicoService.js
- [ ] Corrigir a lógica de snapshot para usar valores do momento da alteração
- [ ] Garantir que equipment_name e dono sejam populados corretamente
- [ ] Melhorar o mapeamento de campos adicionais

### 2. Corrigir js/historico.js
- [ ] Ajustar renderização para mostrar apenas campos realmente alterados
- [ ] Corrigir formatação do botão de mostrar alterações
- [ ] Melhorar a lógica do modal de detalhes

### 3. Corrigir logEquipmentChange.js
- [ ] Melhorar a comparação de valores para evitar falsos positivos
- [ ] Garantir que apenas mudanças reais sejam logadas

### 4. Corrigir equipamentosService.js
- [ ] Ajustar lógica de detecção de mudanças no atualizarEquipamento
- [ ] Remover campos que não foram alterados do objeto changes

### 5. Testes e Validação
- [ ] Testar atualização de equipamentos
- [ ] Verificar se histórico mostra apenas campos alterados
- [ ] Confirmar que snapshots estão corretos
